{"version":3,"file":"vue-insta-stories.global.js","sources":["../src/components/VNode.js","../src/utils/slots.js","../src/utils/anim.js","../src/components/Stories.vue","../src/components/Stories.vue?vue&type=template&id=1b1730d3&lang.js","../../../node_modules/style-inject/dist/style-inject.es.js","../src/components/StoriesCollection.vue","../src/components/StoriesCollection.vue?vue&type=template&id=126eded1&lang.js","../src/components/WithSeeMore.vue","../src/components/WithSeeMore.vue?vue&type=template&id=a8a678bc&lang.js"],"sourcesContent":["export default {\n  functional: true,\n  props: {\n    node: { type: Object, required: true },\n    on: { type: Object, required: false }\n  },\n  render: ({ $props }, { props, data }) => {\n    const isVue2 = $props == undefined\n    const p = (props || $props)\n\n    if (p.on) {\n      if (isVue2) {\n        p.node.key = data.key\n        p.node.componentOptions.listeners = { ...p.node.componentOptions.listeners, ...p.on }\n      } else {\n        const onProps = Object.entries(p.on).reduce((prev, [key, value]) => ({ ...prev, [`on${key}`]: value }), {})\n        p.node.props = { ...p.node.props, ...onProps }\n      }\n    }\n    return p.node\n  },\n}\n","const getNodes = (slot, args = null) => {\n  // slots are functions in vue 3\n  if (typeof slot == \"function\") {\n    return slot(args)\n      .filter(({ type }) => {\n        if (typeof type == \"symbol\")\n          // filters comments in slot\n          return ![\"Symbol(Comment)\"].includes(type.toString());\n        return true;\n      })\n      .map((n) => (n.children instanceof Array ? n.children : [n]))\n      .reduce((nodes, n) => [...nodes, ...n], []);\n  }\n\n  return slot;\n}\n\nexport { getNodes }","const fadeOut = (el) => {\n  el.animate([ // keyframes\n      { opacity: 1 },\n      { opacity: 0 }\n    ], { // options\n      duration: 200, \n      fill: 'forwards',\n    }\n  );\n}\n\nconst fadeIn = (el) => {\n  el.animate([ // keyframes\n      { opacity: 0 },\n      { opacity: 1 }\n    ], { // options\n      duration: 200, \n      fill: 'forwards',\n    }\n  );\n}\n\nexport { fadeOut, fadeIn }","<template>\n  <div ref=\"stories\" @tap=\"tap\" class=\"stories\">\n    <div class=\"timeline\">\n      <div class=\"slice\" v-for=\"(slide, i) in slides\" :key=\"i\">\n        <div class=\"progress\">&nbsp;</div>\n      </div>\n    </div>\n\n    <div class=\"header\">\n      <slot name=\"header\"></slot>\n    </div>\n\n    <VNode :node=\"current\"></VNode>\n  </div>\n</template>\n\n<script>\nimport anime from \"animejs\";\nimport Hammer from \"hammerjs\";\nimport VNode from \"./VNode\";\nimport { getNodes, fadeOut, fadeIn } from \"../utils\";\n\nexport default {\n  components: { VNode },\n  name: \"Stories\",\n  props: {\n    interval: {\n      type: Number,\n      default: 2000,\n    },\n    currentIndex: {\n      type: Number,\n      default: 0,\n    },\n  },\n  watch: {\n    currentIndex: {\n      handler(val) {\n        console.log(\"watch\", val);\n        this.index = val;\n        this.resetSlide();\n      },\n    },\n  },\n  data() {\n    const timeline = anime.timeline({\n      autoplay: false,\n      duration: this.interval,\n      easing: \"linear\",\n    });\n\n    return {\n      index: this.currentIndex,\n      isActive: false,\n      timeline: timeline,\n    };\n  },\n  computed: {\n    slides() {\n      return getNodes(this.$slots.default);\n    },\n    current() {\n      return this.slides[this.index];\n    },\n  },\n  methods: {\n    activate() {\n      // Start timer\n      this.resetSlide();\n    },\n    deactivate() {\n      this.timeline.pause();\n    },\n    resetSlide() {\n      // Jump to beginning of the slide\n      this.timeline.pause();\n      this.timeline.seek(this.index * this.interval);\n      this.timeline.play();\n    },\n    nextSlide() {\n      if (this.index < this.slides.length - 1) {\n        this.index++;\n        this.resetSlide();\n      } else {\n        this.nextStory();\n      }\n    },\n    previousSlide() {\n      if (this.index > 0) {\n        this.index--;\n        this.resetSlide();\n      } else {\n        this.previousStory();\n      }\n    },\n    nextStory() {\n      this.$emit(\"NEXT_STORY\");\n    },\n    previousStory() {\n      this.$emit(\"PREVIOUS_STORY\");\n    },\n    tap(e) {\n      const x = e.gesture.srcEvent.x;\n      const t = window.innerWidth / 3;\n\n      if (x > t) {\n        this.nextSlide();\n      } else {\n        this.previousSlide();\n      }\n    },\n  },\n  mounted() {\n    let $timeline = this.$el.getElementsByClassName(\"timeline\")[0];\n\n    // Add progress bars to the timeline animation group\n    this.slides.forEach((slide, index) => {\n      // vue3 && vue2 support\n      const attrs = slide.props ?? slide.data?.attrs ?? {};\n\n      const slices = $timeline.getElementsByClassName(\"slice\");\n      // console.log(attrs);\n      this.timeline.add({\n        targets: slices[index].getElementsByClassName(\"progress\"),\n        duration: attrs.interval,\n        width: \"100%\",\n        changeBegin: () => {\n          // Update the Vue componenet state when progress bar begins to play\n          this.index = index;\n          this.$emit(\"onStoryStart\", index);\n          this.$emit(\"update:currentIndex\", index);\n        },\n        changeComplete: () => {\n          this.$emit(\"onStoryEnd\", index);\n        },\n        complete: () => {\n          // Move to the next story when finished playing all slides\n          if (index === this.slides.length - 1) {\n            this.nextStory();\n            this.$emit(\"onAllStoriesEnd\");\n          }\n        },\n      });\n    });\n\n    this.hammer = new Hammer.Manager(this.$refs.stories, {\n      domEvents: true,\n      recognizers: [\n        [Hammer.Pan, { direction: Hammer.DIRECTION_HORIZONTAL }],\n        // used as @tap to support stopPropagation\n        [Hammer.Tap],\n\n        [Hammer.Press, { time: 1, threshold: 1000000 }],\n      ],\n    });\n\n    this.hammer.on(\"press\", (e) => {\n      this.timeline.pause();\n      // hide\n      console.log(e);\n      fadeOut(this.$el.getElementsByClassName(\"timeline\")[0]);\n      fadeOut(this.$el.getElementsByClassName(\"header\")[0]);\n      //this.$emit(\"TIMELINE_PAUSE\");\n    });\n\n    this.hammer.on(\"pressup tap\", (e) => {\n      this.timeline.play();\n      //show\n      fadeIn(this.$el.getElementsByClassName(\"timeline\")[0]);\n      fadeIn(this.$el.getElementsByClassName(\"header\")[0]);\n      //this.$emit(\"TIMELINE_PLAY\");\n    });\n\n    // Handle swipe\n    this.hammer.on(\"pan\", (event) => {\n      if (event.isFinal) {\n        if (event.deltaX < 0) {\n          this.nextStory();\n        } else if (event.deltaX > 0) {\n          this.previousStory();\n        }\n      }\n    });\n\n    this.timeline.seek(this.index * this.interval);\n    this.timeline.play();\n  },\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style lang=\"css\">\n.stories {\n  float: left;\n  position: relative;\n  height: 100vh;\n  width: 100vw;\n  z-index: 1;\n  display: flex;\n  flex-direction: column;\n}\n.header {\n  position: absolute;\n  z-index: 10;\n  top: 22px;\n  left: 16px;\n}\n\n.timeline {\n  position: absolute;\n  display: flex;\n  flex-grow: 0;\n  width: 100%;\n  background: -webkit-gradient(\n    linear,\n    top,\n    bottom,\n    from(rgba(0, 0, 0, 0.2)),\n    to(rgba(0, 0, 0, 0))\n  );\n  background: linear-gradient(to bottom, rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0));\n  padding-bottom: 8px; /* To add more space for gradient */\n  z-index: 10;\n}\n\n.timeline > .slice {\n  background: rgba(255, 255, 255, 0.5);\n  height: 2px;\n  border-radius: 2px;\n  margin: 6px 3px;\n  width: 100%;\n}\n\n.timeline > .slice > .progress {\n  background: #fff;\n  height: 2px;\n  border-radius: 2px;\n  width: 0%;\n}\n</style>\n","<template>\n  <div ref=\"stories\" @tap=\"tap\" class=\"stories\">\n    <div class=\"timeline\">\n      <div class=\"slice\" v-for=\"(slide, i) in slides\" :key=\"i\">\n        <div class=\"progress\">&nbsp;</div>\n      </div>\n    </div>\n\n    <div class=\"header\">\n      <slot name=\"header\"></slot>\n    </div>\n\n    <VNode :node=\"current\"></VNode>\n  </div>\n</template>\n\n<script>\nimport anime from \"animejs\";\nimport Hammer from \"hammerjs\";\nimport VNode from \"./VNode\";\nimport { getNodes, fadeOut, fadeIn } from \"../utils\";\n\nexport default {\n  components: { VNode },\n  name: \"Stories\",\n  props: {\n    interval: {\n      type: Number,\n      default: 2000,\n    },\n    currentIndex: {\n      type: Number,\n      default: 0,\n    },\n  },\n  watch: {\n    currentIndex: {\n      handler(val) {\n        console.log(\"watch\", val);\n        this.index = val;\n        this.resetSlide();\n      },\n    },\n  },\n  data() {\n    const timeline = anime.timeline({\n      autoplay: false,\n      duration: this.interval,\n      easing: \"linear\",\n    });\n\n    return {\n      index: this.currentIndex,\n      isActive: false,\n      timeline: timeline,\n    };\n  },\n  computed: {\n    slides() {\n      return getNodes(this.$slots.default);\n    },\n    current() {\n      return this.slides[this.index];\n    },\n  },\n  methods: {\n    activate() {\n      // Start timer\n      this.resetSlide();\n    },\n    deactivate() {\n      this.timeline.pause();\n    },\n    resetSlide() {\n      // Jump to beginning of the slide\n      this.timeline.pause();\n      this.timeline.seek(this.index * this.interval);\n      this.timeline.play();\n    },\n    nextSlide() {\n      console.log(\"next\");\n      if (this.index < this.slides.length - 1) {\n        this.index++;\n        this.resetSlide();\n      } else {\n        this.nextStory();\n      }\n    },\n    previousSlide() {\n      console.log(\"prev\");\n      if (this.index > 0) {\n        this.index--;\n        this.resetSlide();\n      } else {\n        this.previousStory();\n      }\n    },\n    nextStory() {\n      this.$emit(\"NEXT_STORY\");\n    },\n    previousStory() {\n      this.$emit(\"PREVIOUS_STORY\");\n    },\n    tap(e) {\n      const x = e.gesture.srcEvent.x;\n      const t = window.innerWidth / 3;\n\n      if (x > t) {\n        this.nextSlide();\n      } else {\n        this.previousSlide();\n      }\n    },\n  },\n  mounted() {\n    let $timeline = this.$el.getElementsByClassName(\"timeline\")[0];\n\n    // Add progress bars to the timeline animation group\n    this.slides.forEach((slide, index) => {\n      // vue3 && vue2 support\n      const attrs = slide.props ?? slide.data?.attrs ?? {};\n\n      const slices = $timeline.getElementsByClassName(\"slice\");\n      // console.log(attrs);\n      this.timeline.add({\n        targets: slices[index].getElementsByClassName(\"progress\"),\n        duration: attrs.interval,\n        width: \"100%\",\n        changeBegin: () => {\n          // Update the Vue componenet state when progress bar begins to play\n          this.index = index;\n          this.$emit(\"onStoryStart\", index);\n          this.$emit(\"update:currentIndex\", index);\n        },\n        changeComplete: () => {\n          this.$emit(\"onStoryEnd\", index);\n        },\n        complete: () => {\n          // Move to the next story when finished playing all slides\n          if (index === this.slides.length - 1) {\n            this.nextStory();\n            this.$emit(\"onAllStoriesEnd\");\n          }\n        },\n      });\n    });\n\n    this.hammer = new Hammer.Manager(this.$refs.stories, {\n      domEvents: true,\n      recognizers: [\n        [Hammer.Pan, { direction: Hammer.DIRECTION_HORIZONTAL }],\n        // used as @tap to support stopPropagation\n        [Hammer.Tap],\n\n        [Hammer.Press, { time: 1, threshold: 1000000 }],\n      ],\n    });\n\n    this.hammer.on(\"press\", (e) => {\n      this.timeline.pause();\n      // hide\n      //fadeOut(this.$el.getElementsByClassName(\"timeline\")[0]);\n      //fadeOut(this.$el.getElementsByClassName(\"header\")[0]);\n      //this.$emit(\"TIMELINE_PAUSE\");\n    });\n\n    this.hammer.on(\"pressup tap\", (e) => {\n      this.timeline.play();\n      //show\n      //fadeIn(this.$el.getElementsByClassName(\"timeline\")[0]);\n      //fadeIn(this.$el.getElementsByClassName(\"header\")[0]);\n      //this.$emit(\"TIMELINE_PLAY\");\n    });\n\n    // Handle swipe\n    this.hammer.on(\"pan\", (event) => {\n      if (event.isFinal) {\n        if (event.deltaX < 0) {\n          this.nextStory();\n        } else if (event.deltaX > 0) {\n          this.previousStory();\n        }\n      }\n    });\n    // this.hammer.on(\"tap\", (event) => {\n    //   console.log(\"tap\", event);\n    // });\n\n    this.timeline.seek(this.index * this.interval);\n    this.timeline.play();\n    console.log(\"play monyed\");\n  },\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style lang=\"css\">\n.stories {\n  float: left;\n  position: relative;\n  height: 100vh;\n  width: 100vw;\n  z-index: 1;\n  display: flex;\n  flex-direction: column;\n}\n.header {\n  position: absolute;\n  z-index: 10;\n  top: 22px;\n  left: 16px;\n}\n\n.timeline {\n  position: absolute;\n  display: flex;\n  flex-grow: 0;\n  width: 100%;\n  background: -webkit-gradient(\n    linear,\n    top,\n    bottom,\n    from(rgba(0, 0, 0, 0.2)),\n    to(rgba(0, 0, 0, 0))\n  );\n  background: linear-gradient(to bottom, rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0));\n  padding-bottom: 8px; /* To add more space for gradient */\n  z-index: 10;\n}\n\n.timeline > .slice {\n  background: rgba(255, 255, 255, 0.5);\n  height: 2px;\n  border-radius: 2px;\n  margin: 6px 3px;\n  width: 100%;\n}\n\n.timeline > .slice > .progress {\n  background: #fff;\n  height: 2px;\n  border-radius: 2px;\n  width: 0%;\n}\n</style>\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","<template>\n  <v-node :key=\"`stories${index}`\" :node=\"currentStory\" :on=\"on\"></v-node>\n</template>\n<script>\nimport VNode from \"./VNode\";\nimport { getNodes } from \"../utils\";\n\nexport default {\n  components: { VNode },\n  name: \"StoriesCollection\",\n  props: {\n    currentIndex: {\n      type: Number,\n      default: 0,\n    },\n  },\n  data() {\n    return {\n      on: {\n        NEXT_STORY: this.next,\n        PREVIOUS_STORY: this.prev,\n      },\n      index: this.currentIndex,\n    };\n  },\n  watch: {\n    currentIndex: {\n      handler(val) {\n        this.index = val;\n      },\n    },\n  },\n  computed: {\n    stories() {\n      return getNodes(this.$slots.default);\n    },\n    currentStory() {\n      return this.stories[this.index];\n    },\n  },\n  methods: {\n    next() {\n      if (this.index < this.stories.length - 1) {\n        this.index++;\n        this.$emit(\"update:currentIndex\", this.index);\n      } else {\n        this.$emit(\"onAllStoriesEnd\");\n      }\n    },\n    prev() {\n      if (this.index > 0) {\n        this.index--;\n        this.$emit(\"update:currentIndex\", this.index);\n      }\n    },\n  },\n\n  mounted() {\n    // console.log(());\n  },\n};\n</script>","<template>\n  <v-node :key=\"`stories${index}`\" :node=\"currentStory\" :on=\"on\"></v-node>\n</template>\n<script>\nimport VNode from \"./VNode\";\nimport { getNodes } from \"../utils\";\n\nexport default {\n  components: { VNode },\n  name: \"StoriesCollection\",\n  props: {\n    currentIndex: {\n      type: Number,\n      default: 0,\n    },\n  },\n  data() {\n    return {\n      on: {\n        NEXT_STORY: this.next,\n        PREVIOUS_STORY: this.prev,\n      },\n      index: this.currentIndex,\n    };\n  },\n  watch: {\n    currentIndex: {\n      handler(val) {\n        this.index = val;\n      },\n    },\n  },\n  computed: {\n    stories() {\n      return getNodes(this.$slots.default);\n    },\n    currentStory() {\n      return this.stories[this.index];\n    },\n  },\n  methods: {\n    next() {\n      if (this.index < this.stories.length - 1) {\n        this.index++;\n        this.$emit(\"update:currentIndex\", this.index);\n      } else {\n        this.$emit(\"onAllStoriesEnd\");\n      }\n    },\n    prev() {\n      if (this.index > 0) {\n        this.index--;\n        this.$emit(\"update:currentIndex\", this.index);\n      }\n    },\n  },\n\n  mounted() {\n    // console.log(());\n  },\n};\n</script>","<template>\n  <div class=\"wrapper\">\n    <slot />\n\n    <div ref=\"seeMore\" v-if=\"enabled\" @tap.stop=\"emit\" class=\"see-more\">\n      <slot :emit=\"emit\" name=\"see-more\">\n        <span :style=\"{ opacity }\" class=\"see-more-icon\">⌃</span>\n        <span :style=\"{ opacity }\" class=\"see-more-text\">{{ label }}</span>\n      </slot>\n    </div>\n  </div>\n</template>\n<script>\nimport Hammer from \"hammerjs\";\nexport default {\n  props: {\n    enabled: {\n      type: Boolean,\n      default: true,\n    },\n    label: {\n      type: String,\n      default: \"See more!\",\n    },\n  },\n  data: () => ({\n    opacity: 0,\n    lastTimeStamp: 0,\n  }),\n  methods: {\n    emit(e) {\n      // I dont know why the tap event is fired twice\n      const t = e?.timeStamp ?? 0;\n      if (t == 0) this.$emit(\"action\");\n      else {\n        if (t - this.lastTimeStamp > 100) this.$emit(\"action\");\n        this.lastTimeStamp = t;\n      }\n    },\n  },\n  mounted() {\n    this.opacity = 0.9;\n    if (!this.enabled) return void 0;\n    this.hammer = new Hammer.Manager(this.$refs.seeMore, {\n      domEvents: true,\n      recognizers: [\n        [Hammer.Swipe, { direction: Hammer.DIRECTION_VERTICAL }],\n\n        // used as @tap to support stopPropagation\n        [Hammer.Tap],\n      ],\n    });\n\n    this.hammer.on(\"swipeup\", () => {\n      this.emit();\n    });\n  },\n};\n</script>\n<style scoped>\n.wrapper {\n  flex-grow: 1;\n  display: flex;\n  position: relative;\n}\n.see-more {\n  position: absolute;\n  height: 10vh;\n  flex-direction: column;\n  width: 100%;\n  background: linear-gradient(rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.2));\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  bottom: 0;\n  z-index: 10;\n}\n\n.see-more-text {\n  color: white;\n  text-align: center;\n  letter-spacing: 0.1em;\n  margin-bottom: 2.2vh;\n  font-weight: bold;\n  font-size: 1rem;\n  text-transform: uppercase;\n  transition: opacity 300ms ease-in-out;\n}\n.see-more-icon {\n  color: white;\n  text-align: center;\n\n  transition: opacity 300ms ease-in-out;\n}\n</style>","<template>\n  <div class=\"wrapper\">\n    <slot />\n\n    <div ref=\"seeMore\" v-if=\"enabled\" @tap.stop=\"emit\" class=\"see-more\">\n      <slot :emit=\"emit\" name=\"see-more\">\n        <span :style=\"{ opacity }\" class=\"see-more-icon\">⌃</span>\n        <span :style=\"{ opacity }\" class=\"see-more-text\">{{ label }}</span>\n      </slot>\n    </div>\n  </div>\n</template>\n<script>\nimport Hammer from \"hammerjs\";\nexport default {\n  props: {\n    enabled: {\n      type: Boolean,\n      default: true,\n    },\n    label: {\n      type: String,\n      default: \"See more!\",\n    },\n  },\n  data: () => ({\n    opacity: 0,\n    lastTimeStamp: 0,\n  }),\n  methods: {\n    emit(e) {\n      // I dont know why the tap event is fired twice\n      const t = e?.timeStamp ?? 0;\n      if (t == 0) this.$emit(\"action\");\n      else {\n        if (t - this.lastTimeStamp > 100) this.$emit(\"action\");\n        this.lastTimeStamp = t;\n      }\n    },\n  },\n  mounted() {\n    this.opacity = 0.9;\n    if (!this.enabled) return void 0;\n    this.hammer = new Hammer.Manager(this.$refs.seeMore, {\n      domEvents: true,\n      recognizers: [\n        [Hammer.Swipe, { direction: Hammer.DIRECTION_VERTICAL }],\n\n        // used as @tap to support stopPropagation\n        [Hammer.Tap],\n      ],\n    });\n\n    this.hammer.on(\"swipeup\", () => {\n      this.emit();\n    });\n  },\n};\n</script>\n<style scoped>\n.wrapper {\n  flex-grow: 1;\n  display: flex;\n  position: relative;\n}\n.see-more {\n  position: absolute;\n  height: 10vh;\n  flex-direction: column;\n  width: 100%;\n  background: linear-gradient(rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.2));\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  bottom: 0;\n  z-index: 10;\n}\n\n.see-more-text {\n  color: white;\n  text-align: center;\n  letter-spacing: 0.1em;\n  margin-bottom: 2.2vh;\n  font-weight: bold;\n  font-size: 1rem;  \n  text-transform: uppercase;\n  transition: opacity 300ms ease-in-out;\n}\n.see-more-icon {\n  color: white;\n  text-align: center;\n\n  transition: opacity 300ms ease-in-out;\n}\n</style>"],"names":["anime","Hammer","_createVNode","_createBlock","_hoisted_1","_renderSlot"],"mappings":"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"}