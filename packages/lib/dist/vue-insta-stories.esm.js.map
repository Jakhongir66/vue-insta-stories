{"version":3,"file":"vue-insta-stories.esm.js","sources":["../src/components/VNode.js","../src/utils/slots.js","../src/utils/anim.js","../src/components/Stories.vue","../src/components/Stories.vue?vue&type=template&id=1b1730d3&lang.js","../../../node_modules/style-inject/dist/style-inject.es.js","../src/components/StoriesCollection.vue","../src/components/StoriesCollection.vue?vue&type=template&id=126eded1&lang.js","../src/components/WithSeeMore.vue","../src/components/WithSeeMore.vue?vue&type=template&id=a8a678bc&lang.js"],"sourcesContent":["export default {\n  functional: true,\n  props: {\n    node: { type: Object, required: true },\n    on: { type: Object, required: false }\n  },\n  render: ({ $props }, { props, data }) => {\n    const isVue2 = $props == undefined\n    const p = (props || $props)\n\n    if (p.on) {\n      if (isVue2) {\n        p.node.key = data.key\n        p.node.componentOptions.listeners = { ...p.node.componentOptions.listeners, ...p.on }\n      } else {\n        const onProps = Object.entries(p.on).reduce((prev, [key, value]) => ({ ...prev, [`on${key}`]: value }), {})\n        p.node.props = { ...p.node.props, ...onProps }\n      }\n    }\n    return p.node\n  },\n}\n","const getNodes = (slot, args = null) => {\n  // slots are functions in vue 3\n  if (typeof slot == \"function\") {\n    return slot(args)\n      .filter(({ type }) => {\n        if (typeof type == \"symbol\")\n          // filters comments in slot\n          return ![\"Symbol(Comment)\"].includes(type.toString());\n        return true;\n      })\n      .map((n) => (n.children instanceof Array ? n.children : [n]))\n      .reduce((nodes, n) => [...nodes, ...n], []);\n  }\n\n  return slot;\n}\n\nexport { getNodes }","const fadeOut = (el) => {\n  el.animate([ // keyframes\n      { opacity: 1 },\n      { opacity: 0 }\n    ], { // options\n      duration: 200, \n      fill: 'forwards',\n    }\n  );\n}\n\nconst fadeIn = (el) => {\n  el.animate([ // keyframes\n      { opacity: 0 },\n      { opacity: 1 }\n    ], { // options\n      duration: 200, \n      fill: 'forwards',\n    }\n  );\n}\n\nexport { fadeOut, fadeIn }","<template>\n  <div ref=\"stories\" @tap=\"tap\" class=\"stories\">\n    <div class=\"timeline\">\n      <div class=\"slice\" v-for=\"(slide, i) in slides\" :key=\"i\">\n        <div class=\"progress\">&nbsp;</div>\n      </div>\n    </div>\n\n    <div class=\"header\">\n      <slot name=\"header\"></slot>\n    </div>\n\n    <VNode :node=\"current\"></VNode>\n  </div>\n</template>\n\n<script>\nimport anime from \"animejs\";\nimport Hammer from \"hammerjs\";\nimport VNode from \"./VNode\";\nimport { getNodes, fadeOut, fadeIn } from \"../utils\";\n\nexport default {\n  components: { VNode },\n  name: \"Stories\",\n  props: {\n    interval: {\n      type: Number,\n      default: 2000,\n    },\n    currentIndex: {\n      type: Number,\n      default: 0,\n    },\n  },\n  watch: {\n    currentIndex: {\n      handler(val) {\n        console.log(\"watch\", val);\n        this.index = val;\n        this.resetSlide();\n      },\n    },\n  },\n  data() {\n    const timeline = anime.timeline({\n      autoplay: false,\n      duration: this.interval,\n      easing: \"linear\",\n    });\n\n    return {\n      index: this.currentIndex,\n      isActive: false,\n      timeline: timeline,\n    };\n  },\n  computed: {\n    slides() {\n      return getNodes(this.$slots.default);\n    },\n    current() {\n      return this.slides[this.index];\n    },\n  },\n  methods: {\n    activate() {\n      // Start timer\n      this.resetSlide();\n    },\n    deactivate() {\n      this.timeline.pause();\n    },\n    resetSlide() {\n      // Jump to beginning of the slide\n      this.timeline.pause();\n      this.timeline.seek(this.index * this.interval);\n      this.timeline.play();\n    },\n    nextSlide() {\n      if (this.index < this.slides.length - 1) {\n        this.index++;\n        this.resetSlide();\n      } else {\n        this.nextStory();\n      }\n    },\n    previousSlide() {\n      if (this.index > 0) {\n        this.index--;\n        this.resetSlide();\n      } else {\n        this.previousStory();\n      }\n    },\n    nextStory() {\n      this.$emit(\"NEXT_STORY\");\n    },\n    previousStory() {\n      this.$emit(\"PREVIOUS_STORY\");\n    },\n    tap(e) {\n      const x = e.gesture.srcEvent.x;\n      const t = window.innerWidth / 3;\n\n      if (x > t) {\n        this.nextSlide();\n      } else {\n        this.previousSlide();\n      }\n    },\n  },\n  mounted() {\n    let $timeline = this.$el.getElementsByClassName(\"timeline\")[0];\n\n    // Add progress bars to the timeline animation group\n    this.slides.forEach((slide, index) => {\n      // vue3 && vue2 support\n      const attrs = slide.props ?? slide.data?.attrs ?? {};\n\n      const slices = $timeline.getElementsByClassName(\"slice\");\n      // console.log(attrs);\n      this.timeline.add({\n        targets: slices[index].getElementsByClassName(\"progress\"),\n        duration: attrs.interval,\n        width: \"100%\",\n        changeBegin: () => {\n          // Update the Vue componenet state when progress bar begins to play\n          this.index = index;\n          this.$emit(\"onStoryStart\", index);\n          this.$emit(\"update:currentIndex\", index);\n        },\n        changeComplete: () => {\n          this.$emit(\"onStoryEnd\", index);\n        },\n        complete: () => {\n          // Move to the next story when finished playing all slides\n          if (index === this.slides.length - 1) {\n            this.nextStory();\n            this.$emit(\"onAllStoriesEnd\");\n          }\n        },\n      });\n    });\n\n    this.hammer = new Hammer.Manager(this.$refs.stories, {\n      domEvents: true,\n      recognizers: [\n        [Hammer.Pan, { direction: Hammer.DIRECTION_HORIZONTAL }],\n        // used as @tap to support stopPropagation\n        [Hammer.Tap],\n\n        [Hammer.Press, { time: 1, threshold: 1000000 }],\n      ],\n    });\n\n    this.hammer.on(\"press\", (e) => {\n      this.timeline.pause();\n      // hide\n      console.log(e);\n      fadeOut(this.$el.getElementsByClassName(\"timeline\")[0]);\n      fadeOut(this.$el.getElementsByClassName(\"header\")[0]);\n      //this.$emit(\"TIMELINE_PAUSE\");\n    });\n\n    this.hammer.on(\"pressup tap\", (e) => {\n      this.timeline.play();\n      //show\n      fadeIn(this.$el.getElementsByClassName(\"timeline\")[0]);\n      fadeIn(this.$el.getElementsByClassName(\"header\")[0]);\n      //this.$emit(\"TIMELINE_PLAY\");\n    });\n\n    // Handle swipe\n    this.hammer.on(\"pan\", (event) => {\n      if (event.isFinal) {\n        if (event.deltaX < 0) {\n          this.nextStory();\n        } else if (event.deltaX > 0) {\n          this.previousStory();\n        }\n      }\n    });\n\n    this.timeline.seek(this.index * this.interval);\n    this.timeline.play();\n  },\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style lang=\"css\">\n.stories {\n  float: left;\n  position: relative;\n  height: 100vh;\n  width: 100vw;\n  z-index: 1;\n  display: flex;\n  flex-direction: column;\n}\n.header {\n  position: absolute;\n  z-index: 10;\n  top: 22px;\n  left: 16px;\n}\n\n.timeline {\n  position: absolute;\n  display: flex;\n  flex-grow: 0;\n  width: 100%;\n  background: -webkit-gradient(\n    linear,\n    top,\n    bottom,\n    from(rgba(0, 0, 0, 0.2)),\n    to(rgba(0, 0, 0, 0))\n  );\n  background: linear-gradient(to bottom, rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0));\n  padding-bottom: 8px; /* To add more space for gradient */\n  z-index: 10;\n}\n\n.timeline > .slice {\n  background: rgba(255, 255, 255, 0.5);\n  height: 2px;\n  border-radius: 2px;\n  margin: 6px 3px;\n  width: 100%;\n}\n\n.timeline > .slice > .progress {\n  background: #fff;\n  height: 2px;\n  border-radius: 2px;\n  width: 0%;\n}\n</style>\n","<template>\n  <div ref=\"stories\" @tap=\"tap\" class=\"stories\">\n    <div class=\"timeline\">\n      <div class=\"slice\" v-for=\"(slide, i) in slides\" :key=\"i\">\n        <div class=\"progress\">&nbsp;</div>\n      </div>\n    </div>\n\n    <div class=\"header\">\n      <slot name=\"header\"></slot>\n    </div>\n\n    <VNode :node=\"current\"></VNode>\n  </div>\n</template>\n\n<script>\nimport anime from \"animejs\";\nimport Hammer from \"hammerjs\";\nimport VNode from \"./VNode\";\nimport { getNodes, fadeOut, fadeIn } from \"../utils\";\n\nexport default {\n  components: { VNode },\n  name: \"Stories\",\n  props: {\n    interval: {\n      type: Number,\n      default: 2000,\n    },\n    currentIndex: {\n      type: Number,\n      default: 0,\n    },\n  },\n  watch: {\n    currentIndex: {\n      handler(val) {\n        console.log(\"watch\", val);\n        this.index = val;\n        this.resetSlide();\n      },\n    },\n  },\n  data() {\n    const timeline = anime.timeline({\n      autoplay: false,\n      duration: this.interval,\n      easing: \"linear\",\n    });\n\n    return {\n      index: this.currentIndex,\n      isActive: false,\n      timeline: timeline,\n    };\n  },\n  computed: {\n    slides() {\n      return getNodes(this.$slots.default);\n    },\n    current() {\n      return this.slides[this.index];\n    },\n  },\n  methods: {\n    activate() {\n      // Start timer\n      this.resetSlide();\n    },\n    deactivate() {\n      this.timeline.pause();\n    },\n    resetSlide() {\n      // Jump to beginning of the slide\n      this.timeline.pause();\n      this.timeline.seek(this.index * this.interval);\n      this.timeline.play();\n    },\n    nextSlide() {\n      console.log(\"next\");\n      if (this.index < this.slides.length - 1) {\n        this.index++;\n        this.resetSlide();\n      } else {\n        this.nextStory();\n      }\n    },\n    previousSlide() {\n      console.log(\"prev\");\n      if (this.index > 0) {\n        this.index--;\n        this.resetSlide();\n      } else {\n        this.previousStory();\n      }\n    },\n    nextStory() {\n      this.$emit(\"NEXT_STORY\");\n    },\n    previousStory() {\n      this.$emit(\"PREVIOUS_STORY\");\n    },\n    tap(e) {\n      const x = e.gesture.srcEvent.x;\n      const t = window.innerWidth / 3;\n\n      if (x > t) {\n        this.nextSlide();\n      } else {\n        this.previousSlide();\n      }\n    },\n  },\n  mounted() {\n    let $timeline = this.$el.getElementsByClassName(\"timeline\")[0];\n\n    // Add progress bars to the timeline animation group\n    this.slides.forEach((slide, index) => {\n      // vue3 && vue2 support\n      const attrs = slide.props ?? slide.data?.attrs ?? {};\n\n      const slices = $timeline.getElementsByClassName(\"slice\");\n      // console.log(attrs);\n      this.timeline.add({\n        targets: slices[index].getElementsByClassName(\"progress\"),\n        duration: attrs.interval,\n        width: \"100%\",\n        changeBegin: () => {\n          // Update the Vue componenet state when progress bar begins to play\n          this.index = index;\n          this.$emit(\"onStoryStart\", index);\n          this.$emit(\"update:currentIndex\", index);\n        },\n        changeComplete: () => {\n          this.$emit(\"onStoryEnd\", index);\n        },\n        complete: () => {\n          // Move to the next story when finished playing all slides\n          if (index === this.slides.length - 1) {\n            this.nextStory();\n            this.$emit(\"onAllStoriesEnd\");\n          }\n        },\n      });\n    });\n\n    this.hammer = new Hammer.Manager(this.$refs.stories, {\n      domEvents: true,\n      recognizers: [\n        [Hammer.Pan, { direction: Hammer.DIRECTION_HORIZONTAL }],\n        // used as @tap to support stopPropagation\n        [Hammer.Tap],\n\n        [Hammer.Press, { time: 1, threshold: 1000000 }],\n      ],\n    });\n\n    this.hammer.on(\"press\", (e) => {\n      this.timeline.pause();\n      // hide\n      //fadeOut(this.$el.getElementsByClassName(\"timeline\")[0]);\n      //fadeOut(this.$el.getElementsByClassName(\"header\")[0]);\n      //this.$emit(\"TIMELINE_PAUSE\");\n    });\n\n    this.hammer.on(\"pressup tap\", (e) => {\n      this.timeline.play();\n      //show\n      //fadeIn(this.$el.getElementsByClassName(\"timeline\")[0]);\n      //fadeIn(this.$el.getElementsByClassName(\"header\")[0]);\n      //this.$emit(\"TIMELINE_PLAY\");\n    });\n\n    // Handle swipe\n    this.hammer.on(\"pan\", (event) => {\n      if (event.isFinal) {\n        if (event.deltaX < 0) {\n          this.nextStory();\n        } else if (event.deltaX > 0) {\n          this.previousStory();\n        }\n      }\n    });\n    // this.hammer.on(\"tap\", (event) => {\n    //   console.log(\"tap\", event);\n    // });\n\n    this.timeline.seek(this.index * this.interval);\n    this.timeline.play();\n    console.log(\"play monyed\");\n  },\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style lang=\"css\">\n.stories {\n  float: left;\n  position: relative;\n  height: 100vh;\n  width: 100vw;\n  z-index: 1;\n  display: flex;\n  flex-direction: column;\n}\n.header {\n  position: absolute;\n  z-index: 10;\n  top: 22px;\n  left: 16px;\n}\n\n.timeline {\n  position: absolute;\n  display: flex;\n  flex-grow: 0;\n  width: 100%;\n  background: -webkit-gradient(\n    linear,\n    top,\n    bottom,\n    from(rgba(0, 0, 0, 0.2)),\n    to(rgba(0, 0, 0, 0))\n  );\n  background: linear-gradient(to bottom, rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0));\n  padding-bottom: 8px; /* To add more space for gradient */\n  z-index: 10;\n}\n\n.timeline > .slice {\n  background: rgba(255, 255, 255, 0.5);\n  height: 2px;\n  border-radius: 2px;\n  margin: 6px 3px;\n  width: 100%;\n}\n\n.timeline > .slice > .progress {\n  background: #fff;\n  height: 2px;\n  border-radius: 2px;\n  width: 0%;\n}\n</style>\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","<template>\n  <v-node :key=\"`stories${index}`\" :node=\"currentStory\" :on=\"on\"></v-node>\n</template>\n<script>\nimport VNode from \"./VNode\";\nimport { getNodes } from \"../utils\";\n\nexport default {\n  components: { VNode },\n  name: \"StoriesCollection\",\n  props: {\n    currentIndex: {\n      type: Number,\n      default: 0,\n    },\n  },\n  data() {\n    return {\n      on: {\n        NEXT_STORY: this.next,\n        PREVIOUS_STORY: this.prev,\n      },\n      index: this.currentIndex,\n    };\n  },\n  watch: {\n    currentIndex: {\n      handler(val) {\n        this.index = val;\n      },\n    },\n  },\n  computed: {\n    stories() {\n      return getNodes(this.$slots.default);\n    },\n    currentStory() {\n      return this.stories[this.index];\n    },\n  },\n  methods: {\n    next() {\n      if (this.index < this.stories.length - 1) {\n        this.index++;\n        this.$emit(\"update:currentIndex\", this.index);\n      } else {\n        this.$emit(\"onAllStoriesEnd\");\n      }\n    },\n    prev() {\n      if (this.index > 0) {\n        this.index--;\n        this.$emit(\"update:currentIndex\", this.index);\n      }\n    },\n  },\n\n  mounted() {\n    // console.log(());\n  },\n};\n</script>","<template>\n  <v-node :key=\"`stories${index}`\" :node=\"currentStory\" :on=\"on\"></v-node>\n</template>\n<script>\nimport VNode from \"./VNode\";\nimport { getNodes } from \"../utils\";\n\nexport default {\n  components: { VNode },\n  name: \"StoriesCollection\",\n  props: {\n    currentIndex: {\n      type: Number,\n      default: 0,\n    },\n  },\n  data() {\n    return {\n      on: {\n        NEXT_STORY: this.next,\n        PREVIOUS_STORY: this.prev,\n      },\n      index: this.currentIndex,\n    };\n  },\n  watch: {\n    currentIndex: {\n      handler(val) {\n        this.index = val;\n      },\n    },\n  },\n  computed: {\n    stories() {\n      return getNodes(this.$slots.default);\n    },\n    currentStory() {\n      return this.stories[this.index];\n    },\n  },\n  methods: {\n    next() {\n      if (this.index < this.stories.length - 1) {\n        this.index++;\n        this.$emit(\"update:currentIndex\", this.index);\n      } else {\n        this.$emit(\"onAllStoriesEnd\");\n      }\n    },\n    prev() {\n      if (this.index > 0) {\n        this.index--;\n        this.$emit(\"update:currentIndex\", this.index);\n      }\n    },\n  },\n\n  mounted() {\n    // console.log(());\n  },\n};\n</script>","<template>\n  <div class=\"wrapper\">\n    <slot />\n\n    <div ref=\"seeMore\" v-if=\"enabled\" @tap.stop=\"emit\" class=\"see-more\">\n      <slot :emit=\"emit\" name=\"see-more\">\n        <span :style=\"{ opacity }\" class=\"see-more-icon\">⌃</span>\n        <span :style=\"{ opacity }\" class=\"see-more-text\">{{ label }}</span>\n      </slot>\n    </div>\n  </div>\n</template>\n<script>\nimport Hammer from \"hammerjs\";\nexport default {\n  props: {\n    enabled: {\n      type: Boolean,\n      default: true,\n    },\n    label: {\n      type: String,\n      default: \"See more!\",\n    },\n  },\n  data: () => ({\n    opacity: 0,\n    lastTimeStamp: 0,\n  }),\n  methods: {\n    emit(e) {\n      // I dont know why the tap event is fired twice\n      const t = e?.timeStamp ?? 0;\n      if (t == 0) this.$emit(\"action\");\n      else {\n        if (t - this.lastTimeStamp > 100) this.$emit(\"action\");\n        this.lastTimeStamp = t;\n      }\n    },\n  },\n  mounted() {\n    this.opacity = 0.9;\n    if (!this.enabled) return void 0;\n    this.hammer = new Hammer.Manager(this.$refs.seeMore, {\n      domEvents: true,\n      recognizers: [\n        [Hammer.Swipe, { direction: Hammer.DIRECTION_VERTICAL }],\n\n        // used as @tap to support stopPropagation\n        [Hammer.Tap],\n      ],\n    });\n\n    this.hammer.on(\"swipeup\", () => {\n      this.emit();\n    });\n  },\n};\n</script>\n<style scoped>\n.wrapper {\n  flex-grow: 1;\n  display: flex;\n  position: relative;\n}\n.see-more {\n  position: absolute;\n  height: 10vh;\n  flex-direction: column;\n  width: 100%;\n  background: linear-gradient(rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.2));\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  bottom: 0;\n  z-index: 10;\n}\n\n.see-more-text {\n  color: white;\n  text-align: center;\n  letter-spacing: 0.1em;\n  margin-bottom: 2.2vh;\n  font-weight: bold;\n  font-size: 1rem;\n  text-transform: uppercase;\n  transition: opacity 300ms ease-in-out;\n}\n.see-more-icon {\n  color: white;\n  text-align: center;\n\n  transition: opacity 300ms ease-in-out;\n}\n</style>","<template>\n  <div class=\"wrapper\">\n    <slot />\n\n    <div ref=\"seeMore\" v-if=\"enabled\" @tap.stop=\"emit\" class=\"see-more\">\n      <slot :emit=\"emit\" name=\"see-more\">\n        <span :style=\"{ opacity }\" class=\"see-more-icon\">⌃</span>\n        <span :style=\"{ opacity }\" class=\"see-more-text\">{{ label }}</span>\n      </slot>\n    </div>\n  </div>\n</template>\n<script>\nimport Hammer from \"hammerjs\";\nexport default {\n  props: {\n    enabled: {\n      type: Boolean,\n      default: true,\n    },\n    label: {\n      type: String,\n      default: \"See more!\",\n    },\n  },\n  data: () => ({\n    opacity: 0,\n    lastTimeStamp: 0,\n  }),\n  methods: {\n    emit(e) {\n      // I dont know why the tap event is fired twice\n      const t = e?.timeStamp ?? 0;\n      if (t == 0) this.$emit(\"action\");\n      else {\n        if (t - this.lastTimeStamp > 100) this.$emit(\"action\");\n        this.lastTimeStamp = t;\n      }\n    },\n  },\n  mounted() {\n    this.opacity = 0.9;\n    if (!this.enabled) return void 0;\n    this.hammer = new Hammer.Manager(this.$refs.seeMore, {\n      domEvents: true,\n      recognizers: [\n        [Hammer.Swipe, { direction: Hammer.DIRECTION_VERTICAL }],\n\n        // used as @tap to support stopPropagation\n        [Hammer.Tap],\n      ],\n    });\n\n    this.hammer.on(\"swipeup\", () => {\n      this.emit();\n    });\n  },\n};\n</script>\n<style scoped>\n.wrapper {\n  flex-grow: 1;\n  display: flex;\n  position: relative;\n}\n.see-more {\n  position: absolute;\n  height: 10vh;\n  flex-direction: column;\n  width: 100%;\n  background: linear-gradient(rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.2));\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  bottom: 0;\n  z-index: 10;\n}\n\n.see-more-text {\n  color: white;\n  text-align: center;\n  letter-spacing: 0.1em;\n  margin-bottom: 2.2vh;\n  font-weight: bold;\n  font-size: 1rem;  \n  text-transform: uppercase;\n  transition: opacity 300ms ease-in-out;\n}\n.see-more-icon {\n  color: white;\n  text-align: center;\n\n  transition: opacity 300ms ease-in-out;\n}\n</style>"],"names":["_createVNode","_createBlock","_hoisted_1","_renderSlot"],"mappings":"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"}